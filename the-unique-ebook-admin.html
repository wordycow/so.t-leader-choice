<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>The Unique â€“ eBook ê´€ë¦¬ì</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      padding: 24px 16px 40px;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
      background: #020617;
      color: #e5e7eb;
    }
    h1 {
      margin: 0 0 16px;
      font-size: 22px;
    }
    .tip {
      font-size: 12px;
      color: #9ca3af;
      margin-bottom: 16px;
    }
    .book-list {
      max-width: 960px;
      margin: 0 auto 24px;
    }
    .book-row {
      display: flex;
      gap: 16px;
      padding: 16px;
      margin-bottom: 12px;
      border-radius: 12px;
      background: rgba(15,23,42,0.9);
      border: 1px solid rgba(148,163,184,0.45);
    }
    .thumb {
      flex: 0 0 140px;
    }
    .thumb-frame {
      width: 140px;
      height: 140px;
      border-radius: 16px;
      overflow: hidden;
      background: #111827;
      border: 1px solid #4b5563;
    }
    .thumb-frame img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }
    .fields {
      flex: 1;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 10px 16px;
      align-content: flex-start;
    }
    .field {
      display: flex;
      flex-direction: column;
      font-size: 13px;
    }
    .field label {
      margin-bottom: 4px;
      color: #9ca3af;
    }
    .field input[type="text"],
    .field input[type="number"] {
      font-size: 13px;
      padding: 6px 8px;
      border-radius: 8px;
      border: 1px solid #4b5563;
      background: #020617;
      color: #e5e7eb;
    }
    .field input[type="checkbox"] {
      transform: scale(1.1);
    }
    .field input[type="range"] {
      width: 100%;
    }
    .field span.value {
      font-size: 12px;
      color: #9ca3af;
      margin-top: 2px;
    }

    .export-box {
      max-width: 960px;
      margin: 0 auto;
    }
    .export-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 8px 16px;
      border-radius: 999px;
      border: none;
      background: #f97316;
      color: #111827;
      font-weight: 600;
      font-size: 14px;
      cursor: pointer;
      margin-bottom: 8px;
    }
    .export-btn:active {
      transform: translateY(1px);
    }
    textarea {
      width: 100%;
      min-height: 220px;
      border-radius: 12px;
      padding: 10px;
      font-size: 12px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      border: 1px solid #4b5563;
      background: #020617;
      color: #e5e7eb;
      resize: vertical;
    }
    .export-help {
      font-size: 11px;
      color: #9ca3af;
      margin-top: 4px;
    }
    @media (max-width: 600px) {
      .book-row {
        flex-direction: column;
      }
      .thumb {
        flex: 0 0 auto;
      }
    }
  </style>
</head>
<body>
  <h1>The Unique eBook ê´€ë¦¬ì</h1>
  <div class="tip">
    ğŸ‘‰ ì•„ë˜ì—ì„œ <b>ë…¸ì¶œ ì—¬ë¶€ / ìˆœì„œ / ì´ë¯¸ì§€ ì„¸ë¡œ ìœ„ì¹˜</b>ë¥¼ ì¡°ì •í•œ ë‹¤ìŒ, ë§¨ ì•„ë˜
    <b>JSON ë‚´ë³´ë‚´ê¸°</b> ë²„íŠ¼ì„ ëˆŒëŸ¬ ë‚˜ì˜¨ ë‚´ìš©ì„ <code>ebook-config.json</code>ì— ë³µë¶™í•´ì„œ ì €ì¥í•˜ë©´ ë¼.
  </div>

  <div class="book-list" id="bookList">
    <!-- JSê°€ ì±„ì›€ -->
  </div>

  <div class="export-box">
    <button id="exportBtn" class="export-btn">JSON ë‚´ë³´ë‚´ê¸°</button>
    <div class="export-help">
      â€¢ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì•„ë˜ í…ìŠ¤íŠ¸ ë°•ìŠ¤ì— ìµœì‹  ì„¤ì • JSONì´ ìƒì„±ë©ë‹ˆë‹¤.<br>
      â€¢ ì „ì²´ ì„ íƒ(Ctrl+A) â†’ ë³µì‚¬(Ctrl+C) í•´ì„œ GitHubì˜ <code>ebook-config.json</code>ì— ë¶™ì—¬ ë„£ê³  ì €ì¥í•˜ì„¸ìš”.
    </div>
    <textarea id="jsonOutput" readonly placeholder="ì—¬ê¸°ì— JSONì´ ìƒì„±ë©ë‹ˆë‹¤."></textarea>
  </div>

  <script>
    var items = [];

    function renderList() {
      var listEl = document.getElementById('bookList');
      listEl.innerHTML = '';

      items.forEach(function (item, index) {
        var row = document.createElement('div');
        row.className = 'book-row';

        var thumb = document.createElement('div');
        thumb.className = 'thumb';
        var frame = document.createElement('div');
        frame.className = 'thumb-frame';
        var img = document.createElement('img');
        img.src = item.cover;
        img.alt = item.title;
        img.style.objectPosition = '50% ' + (typeof item.posY === 'number' ? item.posY : 50) + '%';
        frame.appendChild(img);
        thumb.appendChild(frame);

        var fields = document.createElement('div');
        fields.className = 'fields';

        // ì œëª©
        var fTitle = document.createElement('div');
        fTitle.className = 'field';
        fTitle.innerHTML = '<label>ì œëª©</label>';
        var titleInput = document.createElement('input');
        titleInput.type = 'text';
        titleInput.value = item.title || '';
        titleInput.addEventListener('input', function () {
          item.title = this.value;
        });
        fTitle.appendChild(titleInput);
        fields.appendChild(fTitle);

        // ë¶€ì œ
        var fSub = document.createElement('div');
        fSub.className = 'field';
        fSub.innerHTML = '<label>ë¶€ì œ(ì„ íƒ)</label>';
        var subInput = document.createElement('input');
        subInput.type = 'text';
        subInput.value = item.subtitle || '';
        subInput.addEventListener('input', function () {
          item.subtitle = this.value;
        });
        fSub.appendChild(subInput);
        fields.appendChild(fSub);

        // ë…¸ì¶œ
        var fVisible = document.createElement('div');
        fVisible.className = 'field';
        var visibleLabel = document.createElement('label');
        visibleLabel.textContent = 'ë…¸ì¶œ ì—¬ë¶€';
        fVisible.appendChild(visibleLabel);
        var visibleInput = document.createElement('input');
        visibleInput.type = 'checkbox';
        visibleInput.checked = item.visible !== false;
        visibleInput.addEventListener('change', function () {
          item.visible = this.checked;
        });
        fVisible.appendChild(visibleInput);
        fields.appendChild(fVisible);

        // ìˆœì„œ
        var fOrder = document.createElement('div');
        fOrder.className = 'field';
        fOrder.innerHTML = '<label>ìˆœì„œ(order)</label>';
        var orderInput = document.createElement('input');
        orderInput.type = 'number';
        orderInput.value = item.order || (index + 1);
        orderInput.addEventListener('input', function () {
          item.order = parseInt(this.value || '0', 10);
        });
        fOrder.appendChild(orderInput);
        fields.appendChild(fOrder);

        // ì´ë¯¸ì§€ ì„¸ë¡œ ìœ„ì¹˜
        var fPos = document.createElement('div');
        fPos.className = 'field';
        fPos.innerHTML = '<label>ì´ë¯¸ì§€ ì„¸ë¡œ ìœ„ì¹˜(posY)</label>';
        var range = document.createElement('input');
        range.type = 'range';
        range.min = '0';
        range.max = '100';
        range.value = (typeof item.posY === 'number' ? item.posY : 50);
        var valSpan = document.createElement('span');
        valSpan.className = 'value';
        valSpan.textContent = range.value + '%';
        range.addEventListener('input', function () {
          var v = parseInt(this.value, 10);
          item.posY = v;
          valSpan.textContent = v + '%';
          img.style.objectPosition = '50% ' + v + '%';
        });
        fPos.appendChild(range);
        fPos.appendChild(valSpan);
        fields.appendChild(fPos);

        row.appendChild(thumb);
        row.appendChild(fields);
        listEl.appendChild(row);
      });
    }

    // JSON ë‚´ë³´ë‚´ê¸°
    document.getElementById('exportBtn').addEventListener('click', function () {
      var output = {
        items: items
      };
      document.getElementById('jsonOutput')..value =
        JSON.stringify(output, null, 2);
    });

    // ì„¤ì • ë¶ˆëŸ¬ì˜¤ê¸°
    fetch('ebook-config.json')
      .then(function (res) { return res.json(); })
      .then(function (data) {
        items = data.items || [];
        // posY/visible/order ê¸°ë³¸ê°’ ì²˜ë¦¬
        items.forEach(function (item, idx) {
          if (typeof item.posY !== 'number') item.posY = 50;
          if (typeof item.order !== 'number') item.order = idx + 1;
          if (typeof item.visible !== 'boolean') item.visible = true;
        });
        renderList();
      })
      .catch(function (err) {
        console.error('ebook-config.jsonì„ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.', err);
      });
  </script>
</body>
</html>
