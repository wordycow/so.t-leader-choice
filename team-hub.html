<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>so.t Team Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
      color: #f9fafb;
      min-height: 100vh;

      background: #020617;
      background-image:
        url("img/bg-team-hub.jpg"),
        radial-gradient(circle at top, rgba(15,23,42,0.25) 0, rgba(15,23,42,0.9) 65%, #020617 100%);
      background-size: cover, cover;
      background-position: center top, center top;
      background-attachment: fixed, fixed;
      animation: bg-pan 60s linear infinite alternate;
    }

    @keyframes bg-pan {
      0% { background-position: center top, center top; }
      100% { background-position: center 20%, center top; }
    }

    .page-wrap {
      max-width: 1200px;
      margin: 24px auto 32px;
      padding: 0 12px 32px;
      width: 100%;
    }

    header {
      margin-bottom: 18px;
    }

    h1 {
      font-size: 24px;
      margin: 0 0 4px;
    }

    .sub {
      font-size: 13px;
      color: #cbd5f5;
      margin: 0 0 10px;
    }

    .glass-panel {
      background: rgba(15,23,42,0.9);
      border-radius: 18px;
      padding: 14px 16px 18px;
      box-shadow: 0 18px 45px rgba(0,0,0,0.7);
      border: 1px solid rgba(148,163,184,0.55);
      backdrop-filter: blur(10px);
    }

    .glass-panel h2 {
      margin: 0 0 6px;
      font-size: 18px;
    }

    /* 링크 패널 */
    .links-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
    }

    .search-input {
      flex: 1;
      padding: 6px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.9);
      font-size: 13px;
      background: rgba(15,23,42,0.95);
      color: #f9fafb;
    }

    .links-section {
      margin-bottom: 18px;
    }

    .links-section h3 {
      font-size: 14px;
      margin: 0 0 8px;
      display: flex;
      align-items: center;
      gap: 6px;
      color: #e5e7eb;
    }

    .links-section h3 span.badge {
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(129,140,248,0.9);
      background: rgba(15,23,42,0.9);
      color: #c7d2fe;
    }

    .badge-admin {
      border-color: rgba(248,113,113,0.9);
      color: #fecaca;
    }

    .badge-public {
      border-color: rgba(59,130,246,0.95);
      color: #bfdbfe;
    }

    .badge-github {
      border-color: rgba(52,211,153,0.95);
      color: #a7f3d0;
    }

    .links-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
      gap: 12px;
    }

    .link-card {
      background: rgba(15,23,42,0.95);
      border-radius: 14px;
      border: 1px solid rgba(148,163,184,0.8);
      overflow: hidden;
      box-shadow: 0 12px 30px rgba(0,0,0,0.6);
      display: flex;
      flex-direction: column;
    }

    .link-card-admin {
      border-color: rgba(248,113,113,0.9);
    }

    .link-card-public {
      border-color: rgba(59,130,246,0.9);
    }

    .link-card-github {
      border-color: rgba(52,211,153,0.9);
    }

    .link-thumb {
      display: block;
      width: 100%;
      aspect-ratio: 16 / 9;
      background: radial-gradient(circle at top, rgba(30,64,175,0.6), rgba(15,23,42,1));
      overflow: hidden;
    }

    .link-thumb img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .link-card-body {
      padding: 8px 10px 10px;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .link-card-title {
      font-size: 13px;
      font-weight: 600;
    }

    .link-card-note {
      font-size: 11px;
      color: #9ca3af;
    }

    .link-card-buttons {
      margin-top: 6px;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .link-chip {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 5px 9px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.8);
      background: rgba(15,23,42,0.9);
      color: #e5e7eb;
      font-size: 11px;
      text-decoration: none;
      cursor: pointer;
      white-space: nowrap;
      font-weight: 500;
    }

    .link-chip:hover {
      transform: translateY(-1px);
      box-shadow: 0 8px 18px rgba(0,0,0,0.6);
    }

    .chip-admin {
      background: rgba(248,113,113,0.95);
      border-color: rgba(248,113,113,1);
      color: #fef2f2;
    }

    .chip-public {
      background: rgba(59,130,246,0.95);
      border-color: rgba(59,130,246,1);
      color: #eff6ff;
    }

    .chip-github {
      background: rgba(16,185,129,0.95);
      border-color: rgba(45,212,191,1);
      color: #ecfdf5;
    }

    /* ========== 공지/프로모션 HTML 생성기 ========== */
    .gen-panel {
      margin-top: 20px;
    }

    .gen-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1.8fr);
      gap: 14px;
    }

    .gen-field {
      margin-bottom: 8px;
    }

    .gen-label {
      font-size: 12px;
      margin-bottom: 4px;
      color: #e5e7eb;
    }

    .gen-input, .gen-textarea, .gen-select {
      width: 100%;
      padding: 6px 8px;
      border-radius: 8px;
      border: 1px solid rgba(148,163,184,0.9);
      background: rgba(15,23,42,0.95);
      color: #f9fafb;
      font-size: 12px;
    }

    .gen-textarea {
      min-height: 120px;
      resize: vertical;
      line-height: 1.5;
    }

    .gen-select {
      height: 30px;
    }

    .gen-btn-row {
      margin-top: 8px;
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .gen-btn {
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.9);
      background: rgba(15,23,42,0.95);
      color: #f9fafb;
      font-size: 11px;
      cursor: pointer;
    }

    .gen-btn:hover {
      background: rgba(30,64,175,0.95);
    }

    .gen-output {
      width: 100%;
      min-height: 180px;
      resize: vertical;
      font-family: ui-monospace, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 11px;
      padding: 8px;
      border-radius: 8px;
      border: 1px solid rgba(148,163,184,0.85);
      background: #020617;
      color: #e5e7eb;
    }

    .gen-note {
      margin-top: 4px;
      font-size: 11px;
      color: #9ca3af;
    }

    @media (max-width: 900px) {
      .gen-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    @media (max-width: 640px) {
      .links-header {
        flex-direction: column;
        align-items: flex-start;
      }

      .search-input {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="page-wrap">
    <header>
      <h1>so.t Team Hub</h1>
      <p class="sub">
        so.t 리더 보드 · 직급의 전당 · The Unique 관련 페이지와 GitHub 소스를 한 곳에서 관리합니다.
      </p>
    </header>

    <!-- 링크 허브 (관리자 전용) -->
    <section class="glass-panel">
      <div class="links-header">
        <h2>링크 허브 (관리자 전용)</h2>
        <input id="link-search" class="search-input" placeholder="링크 이름·설명 검색…" />
      </div>

      <div id="links-container"></div>
    </section>

    <!-- 공지/프로모션 HTML 생성기 -->
    <section class="glass-panel gen-panel">
      <h2>공지 / 프로모션 HTML 생성기</h2>
      <p class="sub">
        ssoti 공지 화면에서 제목과 내용을 복사해와서 붙여 넣으면,
        the-unique-notice.html / the-unique-promo.html에 쓸 HTML 틀을 자동으로 만들어 줍니다.
      </p>

      <div class="gen-grid">
        <!-- 왼쪽: 입력 -->
        <div>
          <div class="gen-field">
            <div class="gen-label">타입 선택</div>
            <select id="gen-type" class="gen-select">
              <option value="notice">공지사항 (the-unique-notice-*.html)</option>
              <option value="promo">프로모션 (the-unique-promo-*.html)</option>
            </select>
          </div>

          <div class="gen-field">
            <div class="gen-label">공지 / 프로모션 제목</div>
            <input id="gen-title" class="gen-input" placeholder="예: 구글 OTP 인증 오류 안내." />
          </div>

          <div class="gen-field">
            <div class="gen-label">본문 내용 (줄바꿈 기준으로 문단 자동 분리)</div>
            <textarea id="gen-body" class="gen-textarea" placeholder="여기에 ssoti 공지 텍스트를 그대로 붙여넣으세요.&#10;한 줄이 하나의 문단이 됩니다."></textarea>
          </div>

          <div class="gen-btn-row">
            <button id="gen-make" class="gen-btn">HTML 생성</button>
            <button id="gen-preview" class="gen-btn">새 창에서 미리보기</button>
          </div>

          <div class="gen-note">
            ※ 생성된 HTML은 GitHub에서 <code>the-unique-notice-YYYYMMDD-N.html</code> 또는
            <code>the-unique-promo-YYYYMMDD-N.html</code> 파일로 만들어 붙여넣으면 됩니다.
          </div>
        </div>

        <!-- 오른쪽: 출력 -->
        <div>
          <div class="gen-label">생성된 HTML 코드 (복사해서 GitHub에 붙여넣기)</div>
          <textarea id="gen-output" class="gen-output" readonly></textarea>
        </div>
      </div>
    </section>
  </div>

  <script>
    /* ========== 1. 링크 데이터 ========== */
    const LINK_SECTIONS = [
      {
        title: "관리자 전용 화면",
        badge: "Admin",
        theme: "admin",
        links: [
          {
            type: "admin",
            label: "리더 보드 관리자 페이지",
            note: "admin-index.html · 리더/폼/결과 관리",
            liveHref: "admin-index.html",
            githubHref: "https://github.com/wordycow/so.t-leader-choice/blob/main/admin-index.html",
            image: "img/admin-index-preview.png"
          },
          {
            type: "admin",
            label: "직급의 전당 관리자 페이지",
            note: "admin-rank-hall.html · 직급/배지 관리",
            liveHref: "admin-rank-hall.html",
            githubHref: "https://github.com/wordycow/so.t-leader-choice/blob/main/admin-rank-hall.html",
            image: "img/admin-rank-hall-preview.png"
          }
        ]
      },
      {
        title: "공통 노출 화면 (참가자용)",
        badge: "Public",
        theme: "public",
        links: [
          {
            type: "public",
            label: "리더 보드",
            note: "index.html · 참가자 최초 진입 화면",
            liveHref: "index.html",
            githubHref: "https://github.com/wordycow/so.t-leader-choice/blob/main/index.html",
            image: "img/index-preview.png"
          },
          {
            type: "public",
            label: "직급의 전당",
            note: "rank-hall.html · 공개용 직급 페이지",
            liveHref: "rank-hall.html",
            githubHref: "https://github.com/wordycow/so.t-leader-choice/blob/main/rank-hall.html",
            image: "img/rank-hall-preview.png"
          },
          {
            type: "public",
            label: "The Unique 대문",
            note: "the-unique-gate.html · The Unique 입구",
            liveHref: "the-unique-gate.html",
            githubHref: "https://github.com/wordycow/so.t-leader-choice/blob/main/the-unique-gate.html",
            image: "img/the-unique-gate-preview.png"
          },
          {
            type: "public",
            label: "The Unique 메인",
            note: "the-unique-main.html · 직급/프로모션 허브 화면",
            liveHref: "the-unique-main.html",
            githubHref: "https://github.com/wordycow/so.t-leader-choice/blob/main/the-unique-main.html",
            image: "img/the-unique-gate-preview.png"
          },
          {
            type: "public",
            label: "The Unique 공지 예시",
            note: "the-unique-notice.html · 단일 공지 상세 예시",
            liveHref: "the-unique-notice.html",
            githubHref: "https://github.com/wordycow/so.t-leader-choice/blob/main/the-unique-notice.html",
            image: "img/bg-unique-notice.jpg"
          },
          {
            type: "public",
            label: "The Unique 프로모션 보기",
            note: "the-unique-promo.html · 프로모션 배너 전체 보기",
            liveHref: "the-unique-promo.html",
            githubHref: "https://github.com/wordycow/so.t-leader-choice/blob/main/the-unique-promo.html",
            image: "img/bg-unique-promo.jpg"
          }
        ]
      },
      {
        title: "GitHub / 소스 관리",
        badge: "GitHub",
        theme: "github",
        links: [
          {
            type: "github",
            label: "GitHub 메인",
            note: "so.t-leader-choice · main 브랜치",
            githubHref: "https://github.com/wordycow/so.t-leader-choice/tree/main",
            image: "img/github-main.png"
          },
          {
            type: "github",
            label: "리더 보드 코드 (index.html)",
            note: "GitHub에서 코드만 바로 보기",
            githubHref: "https://github.com/wordycow/so.t-leader-choice/blob/main/index.html",
            image: "img/index-preview.png"
          },
          {
            type: "github",
            label: "직급의 전당 코드 (rank-hall.html)",
            note: "GitHub에서 코드만 바로 보기",
            githubHref: "https://github.com/wordycow/so.t-leader-choice/blob/main/rank-hall.html",
            image: "img/rank-hall-preview.png"
          },
          {
            type: "github",
            label: "리더 보드 관리자 코드 (admin-index.html)",
            note: "GitHub에서 코드만 바로 보기",
            githubHref: "https://github.com/wordycow/so.t-leader-choice/blob/main/admin-index.html",
            image: "img/admin-index-preview.png"
          },
          {
            type: "github",
            label: "직급의 전당 관리자 코드 (admin-rank-hall.html)",
            note: "GitHub에서 코드만 바로 보기",
            githubHref: "https://github.com/wordycow/so.t-leader-choice/blob/main/admin-rank-hall.html",
            image: "img/admin-rank-hall-preview.png"
          },
          {
            type: "github",
            label: "The Unique 대문 코드 (the-unique-gate.html)",
            note: "GitHub에서 코드만 바로 보기",
            githubHref: "https://github.com/wordycow/so.t-leader-choice/blob/main/the-unique-gate.html",
            image: "img/the-unique-gate-preview.png"
          },
          {
            type: "github",
            label: "The Unique 메인 코드 (the-unique-main.html)",
            note: "GitHub에서 코드만 바로 보기",
            githubHref: "https://github.com/wordycow/so.t-leader-choice/blob/main/the-unique-main.html",
            image: "img/the-unique-gate-preview.png"
          },
          {
            type: "github",
            label: "The Unique 공지 예시 코드 (the-unique-notice.html)",
            note: "GitHub에서 코드만 바로 보기",
            githubHref: "https://github.com/wordycow/so.t-leader-choice/blob/main/the-unique-notice.html",
            image: "img/bg-unique-notice.jpg"
          },
          {
            type: "github",
            label: "The Unique 프로모션 코드 (the-unique-promo.html)",
            note: "GitHub에서 코드만 바로 보기",
            githubHref: "https://github.com/wordycow/so.t-leader-choice/blob/main/the-unique-promo.html",
            image: "img/bg-unique-promo.jpg"
          }
        ]
      }
    ];

    /* ========== 2. 링크 렌더링 ========== */
    const linksContainer = document.getElementById("links-container");
    const searchInput = document.getElementById("link-search");

    function renderLinks(filter = "") {
      const q = filter.trim().toLowerCase();
      linksContainer.innerHTML = "";

      LINK_SECTIONS.forEach(section => {
        const sectionDiv = document.createElement("div");
        sectionDiv.className = "links-section";

        const h3 = document.createElement("h3");
        const badgeClass =
          section.theme === "admin" ? "badge-admin" :
          section.theme === "public" ? "badge-public" :
          "badge-github";
        h3.innerHTML = `${section.title} <span class="badge ${badgeClass}">${section.badge}</span>`;
        sectionDiv.appendChild(h3);

        const grid = document.createElement("div");
        grid.className = "links-grid";

        let visibleCount = 0;

        section.links.forEach(link => {
          const fullText = `${link.label} ${link.note || ""}`.toLowerCase();
          if (q && !fullText.includes(q)) return;

          const card = document.createElement("article");
          card.className = `link-card link-card-${link.type}`;

          const mainHref = link.liveHref || link.githubHref || "#";

          if (link.image) {
            const thumb = document.createElement("a");
            thumb.className = "link-thumb";
            thumb.href = mainHref;
            thumb.target = "_blank";
            thumb.rel = "noopener noreferrer";

            const img = document.createElement("img");
            img.src = link.image;
            img.alt = link.label + " 미리보기";
            thumb.appendChild(img);

            card.appendChild(thumb);
          }

          const body = document.createElement("div");
          body.className = "link-card-body";

          const title = document.createElement("div");
          title.className = "link-card-title";
          title.textContent = link.label;
          body.appendChild(title);

          if (link.note) {
            const note = document.createElement("div");
            note.className = "link-card-note";
            note.textContent = link.note;
            body.appendChild(note);
          }

          const btnRow = document.createElement("div");
          btnRow.className = "link-card-buttons";

          if (link.liveHref) {
            const aLive = document.createElement("a");
            aLive.className =
              "link-chip " + (link.type === "public" ? "chip-public" : "chip-admin");
            aLive.href = link.liveHref;
            aLive.target = "_blank";
            aLive.rel = "noopener noreferrer";
            aLive.textContent = (link.type === "public") ? "페이지 열기" : "관리자 화면 열기";
            btnRow.appendChild(aLive);
          }

          if (link.githubHref) {
            const aGithub = document.createElement("a");
            aGithub.className = "link-chip chip-github";
            aGithub.href = link.githubHref;
            aGithub.target = "_blank";
            aGithub.rel = "noopener noreferrer";
            aGithub.textContent = "GitHub 코드 보기";
            btnRow.appendChild(aGithub);
          }

          body.appendChild(btnRow);
          card.appendChild(body);
          grid.appendChild(card);
          visibleCount++;
        });

        if (visibleCount > 0) {
          sectionDiv.appendChild(grid);
          linksContainer.appendChild(sectionDiv);
        }
      });

      if (!linksContainer.innerHTML) {
        const p = document.createElement("p");
        p.style.fontSize = "12px";
        p.style.color = "#9ca3af";
        p.textContent = "검색어에 해당하는 링크가 없습니다.";
        linksContainer.appendChild(p);
      }
    }

    searchInput.addEventListener("input", () => {
      renderLinks(searchInput.value);
    });

    /* 초기 렌더 */
    renderLinks();

    /* ========== 3. 공지/프로모션 HTML 생성기 기능 ========== */

    const genType   = document.getElementById("gen-type");
    const genTitle  = document.getElementById("gen-title");
    const genBody   = document.getElementById("gen-body");
    const genMake   = document.getElementById("gen-make");
    const genPrev   = document.getElementById("gen-preview");
    const genOutput = document.getElementById("gen-output");

    function buildHtml() {
      const type  = genType.value;   // "notice" or "promo"
      const title = (genTitle.value || "").trim();
      const body  = (genBody.value || "").trim();

      if (!title || !body) {
        alert("제목과 본문을 모두 입력해 주세요.");
        return "";
      }

      const lines = body.split(/\r?\n/).map(l => l.trim()).filter(l => l);

      const bodyHtml = lines
        .map(l => `      <p>${l}</p>`)
        .join("\n");

      const niceTitle = title.replace(/</g, "&lt;").replace(/>/g, "&gt;");

      const tpl = `<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>${niceTitle}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * { box-sizing: border-box; }
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
      background:
        #000
        url("img/bg-unique-${type === "notice" ? "notice" : "promo"}.jpg")
        center center / cover
        no-repeat fixed;
      color: #111827;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px 16px 40px;
    }
    .wrap {
      max-width: 720px;
      width: 100%;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.92);
      border-radius: 12px;
      padding: 20px 22px 26px;
      box-shadow:
        0 10px 30px rgba(0,0,0,0.35),
        0 0 0 1px rgba(209,213,219,0.7);
    }
    h1 {
      font-size: 20px;
      margin-bottom: 8px;
    }
    .meta {
      font-size: 12px;
      color: #6b7280;
      margin-bottom: 16px;
    }
    .body p {
      font-size: 13px;
      line-height: 1.7;
      margin: 6px 0;
    }
    .close-btn {
      margin-top: 16px;
      font-size: 11px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid #d1d5db;
      background: #fff;
      cursor: pointer;
    }
    .close-btn:hover {
      background: #f3f4f6;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>${niceTitle}</h1>
    <div class="meta">작성자: 관리자 · 등록일: (여기에 날짜 입력)</div>

    <div class="body">
${bodyHtml}
    </div>

    <button class="close-btn" onclick="window.close()">창 닫기 ✕</button>
  </div>
</body>
</html>`;

      return tpl;
    }

    genMake.addEventListener("click", () => {
      const html = buildHtml();
      if (html) {
        genOutput.value = html;
      }
    });

    genPrev.addEventListener("click", () => {
      const html = buildHtml();
      if (!html) return;
      const win = window.open("", "_blank");
      if (win) {
        win.document.open();
        win.document.write(html);
        win.document.close();
      }
    });
  </script>
</body>
</html>
