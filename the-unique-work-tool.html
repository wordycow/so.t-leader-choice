<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>The Unique – 일하기 도구 (THE UNIQUE CORE)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- 폰트 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;700&family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">

  <style>
    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: "Noto Sans KR", -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
      color: #e5e7eb;
      min-height: 100vh;
      background: radial-gradient(circle at top, #020617 0, #020617 40%, #000 100%);
    }

    .page-wrap {
      max-width: 1100px;
      margin: 32px auto 40px;
      padding: 0 16px 40px;
    }

    header h1 {
      font-family: "Cinzel", serif;
      font-weight: 700;
      letter-spacing: 0.08em;
      font-size: 24px;
      margin: 0 0 6px;
      text-transform: uppercase;
    }

    header p {
      margin: 0;
      font-size: 14px;
      color: #9ca3af;
    }

    .tagline {
      margin-top: 10px;
      font-size: 13px;
      color: #9ca3af;
    }

    .card {
      background: linear-gradient(135deg, rgba(15,23,42,0.95), rgba(17,24,39,0.95));
      border-radius: 18px;
      border: 1px solid rgba(148,163,184,0.3);
      box-shadow:
        0 18px 40px rgba(0,0,0,0.6),
        0 0 0 1px rgba(15,23,42,0.8);
      padding: 18px 18px 20px;
      margin-top: 18px;
    }

    .card h2 {
      margin: 0 0 10px;
      font-size: 16px;
      font-weight: 600;
      color: #f9fafb;
    }

    .card p {
      margin: 4px 0;
      font-size: 13px;
      color: #cbd5f5;
    }

    .card small {
      font-size: 11px;
      color: #9ca3af;
    }

    .grid {
      display: grid;
      grid-template-columns: minmax(0, 1.3fr) minmax(0, 1fr);
      gap: 16px;
    }

    @media (max-width: 840px) {
      .grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .field-row {
      display: flex;
      gap: 10px;
      margin-top: 8px;
      flex-wrap: wrap;
    }

    .field {
      flex: 1;
      min-width: 150px;
    }

    .field label {
      display: block;
      font-size: 12px;
      color: #9ca3af;
      margin-bottom: 4px;
    }

    .field input {
      width: 100%;
      padding: 7px 9px;
      border-radius: 10px;
      border: 1px solid rgba(148,163,184,0.4);
      background: rgba(15,23,42,0.85);
      color: #e5e7eb;
      font-size: 13px;
    }

    .field input::placeholder {
      color: #6b7280;
    }

    textarea {
      width: 100%;
      min-height: 160px;
      resize: vertical;
      padding: 10px 11px;
      border-radius: 12px;
      border: 1px solid rgba(148,163,184,0.5);
      background: rgba(15,23,42,0.9);
      color: #e5e7eb;
      font-size: 13px;
      line-height: 1.5;
      font-family: "Noto Sans KR", -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
    }

    .btn-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 10px;
    }

    button {
      border: none;
      cursor: pointer;
      font-size: 13px;
      border-radius: 999px;
      padding: 7px 14px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-weight: 500;
      white-space: nowrap;
    }

    .btn-primary {
      background: linear-gradient(135deg, #38bdf8, #6366f1);
      color: #0b1120;
      box-shadow: 0 10px 25px rgba(59,130,246,0.4);
    }

    .btn-secondary {
      background: rgba(15,23,42,0.9);
      color: #e5e7eb;
      border: 1px solid rgba(148,163,184,0.6);
    }

    .divider-text {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: #6b7280;
      margin: 8px 0 4px;
    }

    .pill {
      display: inline-block;
      font-size: 11px;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.6);
      color: #9ca3af;
      margin-right: 6px;
      margin-top: 4px;
    }

    .small-note {
      font-size: 11px;
      color: #9ca3af;
      margin-top: 6px;
    }

    .metric-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 6px;
    }

    .metric {
      flex: 1;
      min-width: 150px;
      font-size: 12px;
      color: #cbd5f5;
      background: radial-gradient(circle at top, rgba(30,64,175,0.6), rgba(15,23,42,0.95));
      border-radius: 12px;
      padding: 8px 10px 10px;
      border: 1px solid rgba(129,140,248,0.55);
    }

    .metric label {
      display: block;
      font-size: 11px;
      color: #a5b4fc;
      margin-bottom: 4px;
    }

    .metric input {
      width: 100%;
      padding: 5px 8px;
      border-radius: 8px;
      border: 1px solid rgba(191,219,254,0.6);
      background: rgba(15,23,42,0.95);
      color: #e5e7eb;
      font-size: 12px;
    }

    .metric small {
      display: block;
      margin-top: 4px;
      font-size: 10px;
      color: #d1d5db;
    }

    footer {
      margin-top: 18px;
      font-size: 11px;
      color: #6b7280;
      text-align: right;
    }

    footer strong {
      color: #e5e7eb;
      font-weight: 500;
    }

    /* 레벨 선택 스타일 */
    .level-select {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 6px;
      margin: 6px 0 4px;
    }

    .level-label {
      font-size: 11px;
      color: #9ca3af;
    }

    .level-btn {
      border: 1px solid rgba(148,163,184,0.6);
      background: rgba(15,23,42,0.9);
      color: #e5e7eb;
      border-radius: 999px;
      padding: 4px 10px;
      font-size: 11px;
      cursor: pointer;
      font-weight: 500;
    }

    .level-btn.level-active {
      background: linear-gradient(135deg, #4ade80, #22c55e);
      color: #022c22;
      border-color: rgba(74,222,128,0.95);
      box-shadow: 0 0 0 1px rgba(22,163,74,0.5);
    }
    /* 오늘 목표 설명(레벨 설명) 강조 스타일 */
    #levelDesc {
      font-size: 13px;          /* 기본 small-note 보다 살짝 크게 */
      color: #facc15;           /* 금색 계열 */
      font-weight: 600;         /* 두껍게 */
      margin-top: 8px;
      line-height: 1.5;
    }

    #levelDesc strong {
      font-size: 14px;          /* "정회원 ~ 스타3" 같은 제목은 더 크게 */
      color: #fde68a;           /* 더 밝은 금색 */
      font-weight: 700;
    }
  </style>
</head>
<body>
  <div class="page-wrap">
    <header>
      <h1>THE UNIQUE CORE</h1>
      <p>“일하기 도구” – 이름만 바꿔서 바로 던질 수 있는 사업 설명 + 오늘 일한 기준</p>
      <div class="tagline">
        명단을 쓰고, 정보를 전달하고, 그 횟수로 내가 일했는지를 본다.  
        감정이 아니라 <strong>“오늘 몇 번 설명했는가”</strong>로 판단한다.
      </div>
    </header>

    <!-- 1. 오늘 일 기준 + 레벨 선택 -->
    <section class="card">
      <h2>오늘 나는 실제로 일을 했는가?</h2>
      <p>
        THE UNIQUE에서 “일했다”의 기준은 감정이 아니라 <strong>설명 횟수</strong>다.<br />
        아래에서 오늘 내가 적용할 기준(레벨)을 고르고, 그 목표에 비해 지금 숫자를 채워가면 된다.
      </p>

      <!-- 기준 선택 -->
      <div class="level-select">
        <span class="level-label">오늘 기준 선택:</span>
        <button type="button" class="level-btn" data-level="basic">정회원 ~ 스타3</button>
        <button type="button" class="level-btn" data-level="mid">Pro1 ~ Pro3</button>
        <button type="button" class="level-btn" data-level="high">Pro4 이상 도전자</button>
      </div>
      <div class="small-note" id="levelDesc">
        (위 버튼 중 하나를 누르면, 오늘 목표가 여기 표시됩니다.)
      </div>

      <div class="metric-row">
        <div class="metric">
          <label for="todayLeads" id="labelLeads">신규 설명 진행 수</label>
          <input id="todayLeads" type="number" min="0" placeholder="0" />
          <small id="helpLeads">
            오늘 <strong>새로 명단 적고, 실제로 구조 설명까지 끝낸 사람 수</strong>.
          </small>
        </div>
        <div class="metric">
          <label for="todayPitches" id="labelPitches">후원 설명 진행 수</label>
          <input id="todayPitches" type="number" min="0" placeholder="0" />
          <small id="helpPitches">
            파트너·다운에게 대신 구조 설명해 준 횟수.
          </small>
        </div>
        <div class="metric">
          <label for="todayInvites" id="labelInvites">오늘 디지털 초대 수</label>
          <input id="todayInvites" type="number" min="0" placeholder="0" />
          <small id="helpInvites">
            디스코드 / 유튜브 / 사이트 링크를 실제로 보낸 횟수.
          </small>
        </div>
      </div>

      <div class="small-note">
        이 숫자들은 이 브라우저에만 저장된다. (localStorage)<br />
        <strong>내가 선택한 기준(레벨)에 맞게, 오늘을 그냥 보내지 않았는지 확인하는 용도</strong>다.
      </div>
    </section>

    <!-- 2. 상대 정보 입력 -->
    <section class="card">
      <h2>1단계 – 상대 정보만 넣으면 되는 입력란</h2>
      <p>상대 이름과 관심사만 넣고 아래 버튼을 누르면, 바로 카톡·디엠에 붙여 넣을 수 있는 문장이 만들어진다.</p>

      <div class="field-row">
        <div class="field">
          <label for="inputName">상대 이름 (예: 민수, 영희)</label>
          <input id="inputName" type="text" placeholder="상대 이름" />
        </div>
        <div class="field">
          <label for="inputTopic">관심/고민 키워드</label>
          <input id="inputTopic" type="text" placeholder="예: 부업, 여행, 시간 자유, 건강, 부채 등" />
        </div>
      </div>

      <div class="field-row">
        <div class="field">
          <label for="inputMyName">내 이름</label>
          <input id="inputMyName" type="text" placeholder="예: 이유송, 써나" />
        </div>
        <div class="field">
          <label for="inputDiscord">디스코드 링크 (고정)</label>
          <input id="inputDiscord" type="text" readonly />
        </div>
      </div>

      <div class="field-row">
        <div class="field">
          <label for="inputYoutube">유튜브 링크 (고정)</label>
          <input id="inputYoutube" type="text" readonly />
        </div>
        <div class="field">
          <label for="inputSite">THE UNIQUE 사이트 링크 (고정)</label>
          <input id="inputSite" type="text" readonly />
        </div>
      </div>

      <div class="btn-row">
        <button class="btn-primary" id="btnBuildText">문장 만들기</button>
        <button class="btn-secondary" id="btnClearInputs">입력 초기화</button>
      </div>

      <div class="small-note">
        ※ 링크 3개는 시스템에서 고정해 둔 값이다. 이름·관심사만 바꿔서 쓰면 된다.
      </div>
    </section>

    <!-- 3. 템플릿 편집기 -->
    <section class="card">
      <h2>2단계 – 내가 쓰는 기본 템플릿 (자유 편집 가능)</h2>
      <p>
        여기 있는 문장은 <strong>“기본 골격”</strong>이다.  
        문장을 마음대로 바꾸고, 저장하면 이 브라우저에서 계속 유지된다.
      </p>

      <div class="divider-text">사용 가능한 치환 키워드</div>
      <div>
        <span class="pill">{{상대이름}}</span>
        <span class="pill">{{관심키워드}}</span>
        <span class="pill">{{내이름}}</span>
        <span class="pill">{{디스코드링크}}</span>
        <span class="pill">{{유튜브링크}}</span>
        <span class="pill">{{사이트링크}}</span>
      </div>

      <textarea id="templateEditor"></textarea>

      <div class="btn-row">
        <button class="btn-secondary" id="btnSaveTemplate">템플릿 저장 (이 브라우저)</button>
        <button class="btn-secondary" id="btnResetTemplate">기본 템플릿으로 되돌리기</button>
      </div>

      <div class="small-note">
        이 템플릿은 <strong>이 브라우저의 localStorage</strong>에 저장된다.  
        다른 사람도 THE UNIQUE 사이트에서 이 페이지에 들어와서 자기 방식대로 템플릿을 바꿔 쓸 수 있다.
      </div>
    </section>

    <!-- 4. 결과 문장 -->
    <section class="card">
      <h2>3단계 – 완성 문장 (여기서 바로 복사해서 보낸다)</h2>
      <p>버튼을 눌러 만든 문장이 여기에 뜬다. 카톡, 디스코드 DM, 인스타, 어디든 붙여 넣으면 된다.</p>

      <textarea id="resultText" placeholder="여기에 완성 문장이 생성됩니다."></textarea>

      <div class="btn-row">
        <button class="btn-primary" id="btnCopyResult">전체 복사하기</button>
        <button class="btn-secondary" id="btnClearResult">내용 비우기</button>
      </div>

      <div class="small-note">
        복사 버튼이 잘 안 되면, 위 박스를 직접 드래그해서 Ctrl+C (또는 휴대폰 복사 기능)로 복사해도 된다.
      </div>
    </section>

    <footer>
      <div><strong>일의 기준</strong> · 명단 + 설명 + 초대 횟수로 나의 일을 판단한다.</div>
    </footer>
  </div>

  <!-- 메인 스크립트 전체 -->
 <script>
(function () {
  // ===== 고정 링크 =====
  const DEFAULT_DISCORD = 'https://discord.gg/3cUN7QXMSY';
  const DEFAULT_YOUTUBE = 'https://www.youtube.com/@%EC%8F%98%EB%8B%BSo.T';
  const DEFAULT_SITE    = 'https://wordycow.github.io/so.t-leader-choice/the-unique-main.html';

  // ===== 템플릿 & 저장 키 =====
  const STORAGE_TEMPLATE_KEY = 'tu_work_template_v2';
  const STORAGE_METRIC_KEY   = 'tu_work_metrics_v3';
  const STORAGE_LEVEL_KEY    = 'tu_work_level_v1';

  // 기본 텍스트 템플릿 (실제 줄바꿈)
  const defaultTemplate = [
    '[{{상대이름}}님에게 보내는 기본 문장]',
    '',
    '{{상대이름}} 요즘에 {{관심키워드}} 이야기 자주 했잖아.',
    '',
    '나는 지금 THE UNIQUE라는 시스템으로',
    '시간·돈·자유를 같이 만드는 일을 준비하고 있어.',
    '',
    '내가 하고 싶은 건,',
    '내가 혼자 뛰는 게 아니라',
    '나랑 맞는 사람들과 같이 구조를 타고 올라가는 거야.',
    '',
    '그래서 10분만에 구조만 간단히 설명해 볼게.',
    '아니다 싶으면 편하게 "난 패스"라고 해도 돼.',
    '',
    '자세한 내용은 우리가 쓰는 공식 채널에서 볼 수 있어:',
    '- 디스코드 : {{디스코드링크}}',
    '- 유튜브   : {{유튜브링크}}',
    '- 사이트   : {{사이트링크}}',
    '',
    '한 번만 쭉 보고 느낌을 솔직하게 말해줘.',
    '',
    '– {{내이름}}'
  ].join('\n');

  // ===== 레벨(기준) 정의 =====
  const LEVELS = {
    basic: {
      name: '정회원 ~ 스타3',
      subtitle: '습관 만드는 단계',
      leadsTarget: 3,
      pitchesTarget: 1,
      invitesTarget: 3,
      leadsText: '신규와 사업설명을 포함한 설명 3회 (사업설명 완성하기)',
      pitchesText: '후원으로 진행하는 사업설명 1회 (1:2 미팅)',
      invitesText: '디지털 초대 3회 (링크 전달과 안내)'
    },
    mid: {
      name: 'Pro1 ~ Pro3',
      subtitle: '조금씩 성과 나기 시작, 사람 붙기 시작',
      leadsTarget: 3,
      pitchesTarget: 3,
      invitesTarget: 6,
      leadsText: '신규와 완성된 사업설명 3회',
      pitchesText: '후원으로 진행하는 사업설명 3회 (1:2 미팅)',
      invitesText: '디지털 초대 6회 (링크 전달과 안내)'
    },
    high: {
      name: 'Pro4 이상 도전자',
      subtitle: '리더십 단계, 깊이 들어간 사람들',
      leadsTarget: 1,
      pitchesTarget: 2,
      invitesTarget: 10,
      leadsText: '신규 사업설명 1회',
      pitchesText: '후원 설명 2회 (다수 인원 대상 사업설명)',
      invitesText: '디지털 초대 10회 (링크 전달과 안내)'
    }
  };

  // ===== DOM 요소 =====
  const inputName    = document.getElementById('inputName');
  const inputTopic   = document.getElementById('inputTopic');
  const inputMyName  = document.getElementById('inputMyName');
  const inputDiscord = document.getElementById('inputDiscord');
  const inputYoutube = document.getElementById('inputYoutube');
  const inputSite    = document.getElementById('inputSite');

  const btnBuildText    = document.getElementById('btnBuildText');
  const btnClearInputs  = document.getElementById('btnClearInputs');
  const btnCopyResult   = document.getElementById('btnCopyResult');
  const btnClearResult  = document.getElementById('btnClearResult');
  const btnSaveTemplate = document.getElementById('btnSaveTemplate');
  const btnResetTemplate= document.getElementById('btnResetTemplate');

  const resultText     = document.getElementById('resultText');
  const templateEditor = document.getElementById('templateEditor');

  const todayLeads   = document.getElementById('todayLeads');
  const todayPitches = document.getElementById('todayPitches');
  const todayInvites = document.getElementById('todayInvites');

  const labelLeads   = document.getElementById('labelLeads');
  const labelPitches = document.getElementById('labelPitches');
  const labelInvites = document.getElementById('labelInvites');

  const helpLeads    = document.getElementById('helpLeads');
  const helpPitches  = document.getElementById('helpPitches');
  const helpInvites  = document.getElementById('helpInvites');
  const levelDesc    = document.getElementById('levelDesc');
  const levelButtons = Array.from(document.querySelectorAll('.level-btn'));

  // ===== 링크 고정 세팅 =====
  if (inputDiscord) {
    inputDiscord.value = DEFAULT_DISCORD;
    inputDiscord.readOnly = true;
  }
  if (inputYoutube) {
    inputYoutube.value = DEFAULT_YOUTUBE;
    inputYoutube.readOnly = true;
  }
  if (inputSite) {
    inputSite.value = DEFAULT_SITE;
    inputSite.readOnly = true;
  }

  // ===== 템플릿 로드/저장 =====
  function loadTemplate() {
    let saved = null;
    try {
      saved = localStorage.getItem(STORAGE_TEMPLATE_KEY);
    } catch (e) {}

    if (saved) {
      // 예전에 잘못 저장된 "\n" 문자열이 있으면 실제 줄바꿈으로 자동 변환
      if (saved.includes('\\n')) {
        saved = saved.replace(/\\n/g, '\n');
        try {
          localStorage.setItem(STORAGE_TEMPLATE_KEY, saved);
        } catch (e) {}
      }
      templateEditor.value = saved;
    } else {
      templateEditor.value = defaultTemplate;
    }
  }

  function saveTemplate() {
    try {
      localStorage.setItem(STORAGE_TEMPLATE_KEY, templateEditor.value);
      alert('템플릿이 이 브라우저에 저장되었습니다.');
    } catch (e) {
      alert('템플릿 저장 중 오류가 발생했습니다.');
    }
  }

  function resetTemplate() {
    if (!confirm('기본 템플릿으로 되돌릴까요? (지금 쓴 내용은 사라집니다)')) return;
    templateEditor.value = defaultTemplate;
    saveTemplate();
  }

  // ===== 문장 만들기 =====
  function buildText() {
    if (!resultText) return;

    const name   = (inputName  && inputName.value)  || '';
    const topic  = (inputTopic && inputTopic.value) || '';
    const myName = (inputMyName && inputMyName.value) || '';

    let tpl = (templateEditor && templateEditor.value.trim())
      ? templateEditor.value
      : defaultTemplate;

    const map = {
      '상대이름': name,
      '관심키워드': topic,
      '내이름': myName,
      '디스코드링크': DEFAULT_DISCORD,
      '유튜브링크': DEFAULT_YOUTUBE,
      '사이트링크': DEFAULT_SITE
    };

    Object.keys(map).forEach(function (key) {
      const pattern = new RegExp('{{' + key + '}}', 'g');
      tpl = tpl.replace(pattern, map[key]);
    });

    resultText.value = tpl;
  }

  // ===== 복사 기능 =====
  function copyResult() {
    if (!resultText) return;
    const text = resultText.value || '';
    if (!text.trim()) {
      alert('복사할 내용이 없습니다. 먼저 문장을 만들어 주세요.');
      return;
    }

    if (navigator.clipboard && navigator.clipboard.writeText) {
      navigator.clipboard.writeText(text)
        .then(function () {
          alert('문장이 복사되었습니다. 카톡/DM에 붙여 넣으면 됩니다.');
        })
        .catch(fallbackCopy);
    } else {
      fallbackCopy();
    }

    function fallbackCopy() {
      try {
        resultText.focus();
        resultText.select();
        const ok = document.execCommand('copy');
        alert(ok
          ? '문장이 복사되었습니다. 카톡/DM에 붙여 넣으면 됩니다.'
          : '자동 복사가 잘 안 됩니다. 직접 드래그해서 복사해 주세요.');
      } catch (e) {
        alert('자동 복사가 잘 안 됩니다. 직접 드래그해서 복사해 주세요.');
      }
    }
  }

  function clearInputs() {
    if (!confirm('이름/관심/내 이름만 비울까요?')) return;
    if (inputName) inputName.value = '';
    if (inputTopic) inputTopic.value = '';
    if (inputMyName) inputMyName.value = '';
  }

  function clearResult() {
    if (!resultText) return;
    resultText.value = '';
  }

  // ===== 레벨 적용 =====
  function applyLevel(levelKey) {
    const cfg = LEVELS[levelKey] || LEVELS.basic;

    levelButtons.forEach(function (btn) {
      btn.classList.toggle('level-active', btn.dataset.level === levelKey);
    });

    if (labelLeads) {
      labelLeads.textContent = '신규 설명 진행 수 (목표 ' + cfg.leadsTarget + '회)';
    }
    if (labelPitches) {
      labelPitches.textContent = '후원 설명 진행 수 (목표 ' + cfg.pitchesTarget + '회)';
    }
    if (labelInvites) {
      labelInvites.textContent = '오늘 디지털 초대 수 (목표 ' + cfg.invitesTarget + '회)';
    }

    if (helpLeads)   helpLeads.textContent   = cfg.leadsText;
    if (helpPitches) helpPitches.textContent = cfg.pitchesText;
    if (helpInvites) helpInvites.textContent = cfg.invitesText;

    if (levelDesc) {
      levelDesc.innerHTML =
        '<strong>' + cfg.name + '</strong> · ' + cfg.subtitle +
        '<br />오늘 목표: 신규 사업설명 ' + cfg.leadsTarget +
        '회 · 후원 사업설명 ' + cfg.pitchesTarget +
        '회 · 디지털 초대 ' + cfg.invitesTarget + '회';
    }

    try {
      localStorage.setItem(STORAGE_LEVEL_KEY, levelKey);
    } catch (e) {}
  }

  // ===== 지표 저장/로드 =====
  function loadMetrics() {
    try {
      const raw = localStorage.getItem(STORAGE_METRIC_KEY);
      if (!raw) return;
      const data = JSON.parse(raw);
      if (typeof data.leads === 'number')   todayLeads.value   = data.leads;
      if (typeof data.pitches === 'number') todayPitches.value = data.pitches;
      if (typeof data.invites === 'number') todayInvites.value = data.invites;
    } catch (e) {}
  }

  function saveMetrics() {
    const data = {
      leads:   Number(todayLeads.value)   || 0,
      pitches: Number(todayPitches.value) || 0,
      invites: Number(todayInvites.value) || 0
    };
    try {
      localStorage.setItem(STORAGE_METRIC_KEY, JSON.stringify(data));
    } catch (e) {}
  }

  // ===== 이벤트 연결 =====
  if (btnBuildText)   btnBuildText.addEventListener('click', buildText);
  if (btnClearInputs) btnClearInputs.addEventListener('click', clearInputs);
  if (btnCopyResult)  btnCopyResult.addEventListener('click', copyResult);
  if (btnClearResult) btnClearResult.addEventListener('click', clearResult);
  if (btnSaveTemplate) btnSaveTemplate.addEventListener('click', saveTemplate);
  if (btnResetTemplate) btnResetTemplate.addEventListener('click', resetTemplate);

  [todayLeads, todayPitches, todayInvites].forEach(function (el) {
    if (!el) return;
    el.addEventListener('change', saveMetrics);
    el.addEventListener('blur', saveMetrics);
  });

  levelButtons.forEach(function (btn) {
    btn.addEventListener('click', function () {
      applyLevel(btn.dataset.level);
    });
  });

  // ===== 초기화 =====
  if (templateEditor) loadTemplate();
  loadMetrics();

  let savedLevel = 'basic';
  try {
    const stored = localStorage.getItem(STORAGE_LEVEL_KEY);
    if (stored && LEVELS[stored]) savedLevel = stored;
  } catch (e) {}
  applyLevel(savedLevel);

  // 첫 화면에 기본 문장 한 번 만들어두기
  buildText();
})();
</script>
</body>
</html>
